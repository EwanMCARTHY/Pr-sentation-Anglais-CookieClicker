<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productivity Simulator</title>
    <style>
        body { font-family: 'Courier New', monospace; background-color: #1a1a1a; color: #00ff00; text-align: center; padding: 20px; user-select: none; }
        h1 { font-size: 1.5rem; margin-bottom: 10px; }
        .container { max-width: 600px; margin: 0 auto; }
        
        /* Strat Selection */
        #setup-screen { display: block; }
        #game-screen, #result-screen { display: none; }
        
        .btn { background: #333; color: white; border: 2px solid #00ff00; padding: 15px; width: 100%; margin: 10px 0; font-size: 1.2rem; cursor: pointer; }
        .btn:active { background: #00ff00; color: black; }
        
        /* Game UI */
        #score-display { font-size: 3rem; font-weight: bold; margin: 20px 0; }
        #timer-display { color: #ff5555; font-size: 1.2rem; }
        .log-box { border: 1px solid #555; height: 100px; overflow-y: scroll; font-size: 0.8rem; text-align: left; padding: 5px; margin-top: 10px; color: #aaa; }

        /* Strategies info */
        .strat-desc { font-size: 0.9rem; color: #ccc; margin-bottom: 20px; border: 1px dashed #555; padding: 10px;}
    </style>
</head>
<body>

<div class="container">

    <div id="setup-screen">
        <h1>ENSAM PRODUCTIVITY SIM</h1>
        <p>Select your assigned strategy:</p>
        
        <div class="strat-desc" id="strat-info">Select a team below...</div>

        <button class="btn" onclick="selectStrat('A')">TEAM A: The Grinders</button>
        <button class="btn" onclick="selectStrat('B')">TEAM B: The Investors</button>
        <button class="btn" onclick="selectStrat('C')">TEAM C: The Gamblers</button>
    </div>

    <div id="game-screen">
        <div id="timer-display">Time Left: 03:00</div>
        <h3>Production Output</h3>
        <div id="score-display">0</div>
        
        <button id="main-action-btn" class="btn" onclick="performAction()">PRODUCE (Click)</button>
        <button id="upgrade-btn" class="btn" onclick="buyUpgrade()" style="border-color: #ffff00; color:#ffff00; display:none;">INVEST ($50)</button>

        <div class="log-box" id="game-log">Simulation started...</div>
    </div>

    <div id="result-screen">
        <h1>SIMULATION ENDED</h1>
        <p>Final Production Score:</p>
        <div id="final-score" style="font-size: 4rem; color: #00ff00;">0</div>
        <p>Keep this screen open for analysis.</p>
        <button class="btn" onclick="location.reload()">Reset Simulation</button>
    </div>

</div>

<script>
    // CONFIGURATION
    const GAME_DURATION = 180; // 3 minutes in seconds (Change here if needed)
    
    let score = 0;
    let strategy = '';
    let timeLeft = GAME_DURATION;
    let autoClickRate = 0; // Points par seconde
    let timerInterval;
    let autoClickInterval;

    // Strategies Logic
    const strategies = {
        'A': { name: "The Grinders", desc: "Linear Growth. High active income. No automation.", color: "#ff5555" },
        'B': { name: "The Investors", desc: "Exponential Growth. Low active income. High investment potential.", color: "#5555ff" },
        'C': { name: "The Gamblers", desc: "Volatile Growth. High risk, high reward actions.", color: "#ffff55" }
    };

    function selectStrat(strat) {
        strategy = strat;
        document.getElementById('setup-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'block';
        
        // Setup UI based on strategy
        const btn = document.getElementById('main-action-btn');
        const upgBtn = document.getElementById('upgrade-btn');

        if (strategy === 'B') {
            upgBtn.style.display = 'block';
            btn.innerHTML = "WORK (Low Yield)";
            log("Strategy B: Save 50 points to Invest!");
        } else if (strategy === 'C') {
            btn.innerHTML = "RISKY MARKET BET";
            log("Strategy C: Good luck...");
        } else {
            log("Strategy A: Click as fast as you can!");
        }

        startGame();
    }

    function startGame() {
        // Main Timer
        timerInterval = setInterval(() => {
            timeLeft--;
            let mins = Math.floor(timeLeft / 60).toString().padStart(2, '0');
            let secs = (timeLeft % 60).toString().padStart(2, '0');
            document.getElementById('timer-display').innerText = `Time Left: ${mins}:${secs}`;
            
            if (timeLeft <= 0) endGame();
        }, 1000);

        // Auto Clicker Loop (For Strategy B)
        autoClickInterval = setInterval(() => {
            if (autoClickRate > 0) {
                score += autoClickRate;
                updateScore();
            }
        }, 1000);
    }

    function performAction() {
        let points = 0;

        if (strategy === 'A') {
            // Linear: 1 click = 1 point always
            points = 1; 
        } 
        else if (strategy === 'B') {
            // Investor: Low active income
            points = 1; 
        } 
        else if (strategy === 'C') {
            // Gambler: Random -5 to +10
            let luck = Math.random();
            if (luck < 0.2) points = -5; // 20% bad luck
            else if (luck > 0.8) points = 10; // 20% jackpot
            else points = 2; // Normal
        }

        score += points;
        if (score < 0) score = 0; // No debt
        updateScore();
    }

    function buyUpgrade() {
        if (strategy === 'B') {
            if (score >= 50) {
                score -= 50;
                autoClickRate += 5; // The compounding machine
                log("INVESTMENT MADE! +5/sec auto-production");
                updateScore();
            } else {
                log("Not enough capital!");
            }
        }
    }

    function updateScore() {
        document.getElementById('score-display').innerText = Math.floor(score);
    }

    function log(msg) {
        const box = document.getElementById('game-log');
        box.innerHTML = `> ${msg}<br>` + box.innerHTML;
    }

    function endGame() {
        clearInterval(timerInterval);
        clearInterval(autoClickInterval);
        document.getElementById('game-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('final-score').innerText = Math.floor(score);
    }
</script>
</body>
</html>